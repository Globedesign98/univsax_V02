#CACHE{0}

[<p class='formulaire_ok'>(#ENV*{message_ok})</p>]
[<p class='formulaire_erreur'>(#ENV*{message_erreur})</p>]
	<form action='#ENV{action}' method='post' name="formulaire" id="formulaire">


		<B_documents>
		<BOUCLE_documents(DOCUMENTS){id_document}{tout}>
			#SET{ci_type_inclus,'non'}
			<BOUCLE_type_document(TYPES_DOCUMENTS){extension}>
			#SET{ci_type_inclus,#INCLUS}
			</BOUCLE_type_document>

			#SET{ci_logo,''}
                        [(#MODE|in_array{#ARRAY{0,logoon,1,logooff}}|oui)                        
			#SET{ci_logo,'oui'}
                        ]
                        
			#SET{ci_noscript,''}
			[(#GET{ci_type_inclus}|match{^(image|embed)$}|oui)
				#SET{ci_noscript,'oui'}
			]
			[(#EXTENSION|match{'^(gif|jpg|png)$'}|oui)
				#SET{ci_noscript,'oui'}
			]		
			[(#GET{ci_noscript}|=={oui}|oui)
			<noscript><div class="aidecadregris"><:cisf:enregistrement_manuel_doc_modif:></div></noscript>
			]
                        
			[(#GET{ci_type_inclus}|=={image}|oui)
                                    <div class="intro_formulaire">
					<img src="[(#FICHIER|image_reduire{600,600}|extraire_attribut{src}|attribut_url)]">
					<div class="texte">
					([<:cisf:eq_format:> (#TYPE_DOCUMENT)][ - (#TAILLE|taille_en_octets)][ - hauteur (#HAUTEUR)px][ - largeur (#LARGEUR)px])
					</div>
                                    
                                        [(#EXTENSION|match{gif|png|jpg}|oui) #SET{id,#ID_VIGNETTE|?{#ID_VIGNETTE,#ID_DOCUMENT}}
                                        <div class="tourner">
                                        <a href="[(#SELF|parametre_url{cilienget,bt_tourner_gauche})]" onclick="cilien('bt_tourner_gauche'); return false;" class="">
                                        <img width="12" height="12" alt="<:medias:image_tourner_gauche:>" src="#CHEMIN_IMAGE{tourner-gauche-12.png}">
                                        </a>
                                        <a href="[(#SELF|parametre_url{cilienget,bt_tourner_droite})]" onclick="cilien('bt_tourner_droite'); return false;" class="">
                                        <img width="12" height="12" alt="<:medias:image_tourner_droite:>" src="#CHEMIN_IMAGE{tourner-droite-12.png}">
                                        </a>
                                        <a href="[(#SELF|parametre_url{cilienget,bt_tourner_180})]" onclick="cilien('bt_tourner_180'); return false;" class="">
                                        <img width="12" height="12" alt="<:medias:image_tourner_180:>" src="#CHEMIN_IMAGE{tourner-180-12.png}">
                                        </a>
                                        </div>
                                        <div class='clearer'>&nbsp;</div>
                                        ]
                                    </div>
					<div class="editerdocument">
				    <div>
					<label for="titre" class="ftitre1"><:info_titre:></label>
			
			]
			[(#GET{ci_type_inclus}|=={embed}|oui)
                                    <div class="intro_formulaire">
					<div class="texte">
					<a href="[(#URL_DOCUMENT|attribut_url)]" class="document gisehleft" title="<:cisf:eq_ouvre_document:> [(#TITRE|supprimer_numero)] <:cisf:eq_dans_fenetre:>" target="_blank">[(#TITRE|supprimer_numero)]</a> ([(#FICHIER|basename)][ - <:cisf:eq_format:> (#TYPE_DOCUMENT)][ - (#TAILLE|taille_en_octets)])
					</div>
                                    </div>
					<div class="editerdocument">
				    <div>
					<label for="titre" class="ftitre1"><:info_titre:></label>
			]
			[(#GET{ci_type_inclus}|=={non}|oui)
                                    <div class="intro_formulaire">
					<div class="texte">
					<a href="[(#URL_DOCUMENT|attribut_url)]" class="document gisehleft" title="<:cisf:eq_ouvre_document:> [(#TITRE|supprimer_numero)] <:cisf:eq_dans_fenetre:>" target="_blank">[(#TITRE|supprimer_numero)]</a> ([(#FICHIER|basename)][ - <:cisf:eq_format:> (#TYPE_DOCUMENT)][ - (#TAILLE|taille_en_octets)])
					</div>
                                    </div>
					<div class="editerdocument">
				    <div>
					<label for="titre" class="ftitre1"><:texte_titre_obligatoire:></label>
			]
					
			[<span class='erreur_message'>(#ENV*{erreurs}|table_valeur{titre})</span>]
			<input type='text' class='formo' name='titre' id='titre' size="80"[ lang='(#LANGUE)'] value="[(#ENV**{titre})]"/>
			</div><div>			
			<label for="descriptif" class="ftitre1"><span class="gras"><:texte_descriptif_rapide:></span></label>
			[<span class='erreur_message'>(#ENV*{erreurs}|table_valeur{descriptif})</span>]
			<textarea name='descriptif' id='descriptif'[ lang='(#LANGUE)'] class='forml' rows='3' cols='40'>[(#ENV**{descriptif})]</textarea>
			</div>
	
			<div>			
			<label for="credits" class="ftitre1"><span class="gras"><:cisf:credits:></span></label>
			[<span class='erreur_message'>(#ENV*{erreurs}|table_valeur{credits})</span>]
			<input type='text' class='formo' name='credits' id='credits' size="80"[ lang='(#LANGUE)'] value="[(#ENV**{credits,''})]"/>
			</div>

[(#SPIP_VERSION|>={4}|oui)	
			[(#MEDIA|=={image}|oui)
			<div>
                        <label for="alt" class="ftitre1"><span class="gras"><:cisf:label_alt:></span></label>
                        [<span class='erreur_message'>(#ENV*{erreurs}|table_valeur{alt})</span>]
                        <p class="ftitre1"><:cisf:info_alt:>[ (#PLUGIN{ciwidget}|oui)<:cisf:info_alt_ciwidget:>]</p>
                        <input type='text' class='formo' name='alt' id='alt' size="80" value="[(#ENV**{alt,''})]" />
			</div>
			]
]
			</div>


		[(#REM) Date de mise en ligne ]
		
		[(#CONFIG{documents_date}|=={oui}|oui)
			<fieldset class="datedoc">
			<legend><:info_mise_en_ligne:></legend>
			<div>
			<div>
			<label for="date_doc"><:cisf:eq_date_format:> </label>
			<input [(#SPIP_VERSION|>={4}|oui)class='date formo'] type='text' name='date_doc' id='date_doc' value="[(#DATE|affdate{'d/m/Y'})]" size='10' maxlength='10' >
			</div>
			<div>
			<label for='heure_doc'><:cisf:eq_heure_format:> </label>
			<input type='text' name='heure_doc' id='heure_doc' class='fondl[(#SPIP_VERSION|>={4}|oui) formo heure]' value="[(#DATE|affdate{'H:i'})]" size='5' maxlength='5' >
			</div>
		    </div>
			</fieldset>
		]


		[(#REM) Bloc d'edition de la taille du document ]
		
		#SET{ci_taille,'oui'}
		[(#EXTENSION|match{'^(gif|jpg|png)$'}|oui)
			[(#HAUTEUR|>{0}|oui)
				[(#LARGEUR|>{0}|oui)
					[(#DISTANT|!={oui}|oui)
						#SET{ci_taille,'non'}
					]			
				]
			]
		]
		[(#GET{ci_type_inclus}|=={non}|oui)
			#SET{ci_taille,'non'}
		]
		[(#GET{ci_type_inclus}|!={embed}|oui)
			[(#HAUTEUR|>{0}|non)
				[(#LARGEUR|>{0}|non)
					[(#DISTANT|!={oui}|oui)
						#SET{ci_taille,'non'}
					]			
				]
			]
		]
		[(#GET{ci_taille}|=={oui}|oui)
				<div class="editerdocument">
			    <div>
				<label for="largeur_document" class="ftitre1"><span class="gras"><:cisf:eq_largeur_pixel:></span> <:cisf:eq_obligatoire_flv:></label>
				<input type='text' name='largeur_document' value='#LARGEUR' size='5' >
				<label for="hauteur_document" class="ftitre1"><span class="gras"><:cisf:eq_hauteur_pixel:></span> <:cisf:eq_obligatoire_flv:></label>
				<input type='text' name='hauteur_document' value='#HAUTEUR' size='5' >
				<div class="texte">&nbsp;</div>
				</div>
				</div>
		]		

		
		[(#REM) Choix de l'alignement]

		#SET{ci_mode,#MODE}
		
		#SET{ci_aligner,'non'}
		[(#ENV{ci_ins_document}|match{^(text_area|descriptif)$}|oui)
			#SET{ci_aligner,'oui'}
			#SET{ci_mode,'document'}
		]		
		[(#ENV{ci_ins_image}|match{^(text_area|descriptif)$}|oui)
			#SET{ci_aligner,'oui'}
			#SET{ci_mode,'image'}
		]		
		
		[(#GET{ci_aligner}|=={oui}|oui)

			#SET{ci_align_image,'left'}
			[(#GET{ci_type_inclus}|=={image}|oui)
				[(#GET{ci_mode}|=={document}|oui)
					#SET{ci_align_image,'vignette'}
				]
			]
			[(#ENV{align_image}|match{^(left|center|right|vignette)$}|oui)
				#SET{ci_align_image,#ENV{align_image}}
			]

			[(#GET{ci_mode}|=={document}|oui)
				[(#GET{ci_type_inclus}|match{^(image|embed)$}|oui)
					[(#LARGEUR|>{0}|oui)
						[(#HAUTEUR|>{0}|oui)
			
				<fieldset class="statut"> 
				<legend class="statut"><:cisf:eq_alignement:></legend> 
				<div class="radiov"><input id="vignette" type="radio" name="align_image" [(#GET{ci_align_image}|=={vignette}|oui)checked="checked"] value="vignette" /><label for="vignette"><:cisf:eq_inclusion_vign:></label></div> 
				<div class="radio"><input id="left" type="radio" name="align_image" [(#GET{ci_align_image}|=={left}|oui)checked="checked"] value="left" /><label for="left" ><:cisf:eq_inclusion_gauche:></label></div> 
				<div class="radio"><input id="center" type="radio" name="align_image" [(#GET{ci_align_image}|=={center}|oui)checked="checked"] value="center" /><label for="center" ><:cisf:eq_inclusion_centre:></label></div> 
				<div class="radio"><input id="right" type="radio" name="align_image" [(#GET{ci_align_image}|=={right}|oui)checked="checked"] value="right" /><label for="right" ><:cisf:eq_inclusion_droite:></label></div> 
				</fieldset>

						]
					]
				]
			]

			[(#GET{ci_mode}|=={image}|oui)
				<fieldset class="statut"> 
				<legend class="statut"><:cisf:eq_alignement:></legend> 
				<div class="radio"><input id="left" type="radio" name="align_image" [(#GET{ci_align_image}|=={left}|oui)checked="checked"] value="left" /><label for="left" ><:cisf:eq_inclusion_gauche:></label></div> 
				<div class="radio"><input id="center" type="radio" name="align_image" [(#GET{ci_align_image}|=={center}|oui)checked="checked"] value="center" /><label for="center" ><:cisf:eq_inclusion_centre:></label></div> 
				<div class="radio"><input id="right" type="radio" name="align_image" [(#GET{ci_align_image}|=={right}|oui)checked="checked"] value="right" /><label for="right" ><:cisf:eq_inclusion_droite:></label></div> 
				</fieldset>
			]
			
			[(#GET{ci_mode}|=={vignette}|oui)
				<fieldset class="statut"> 
				<legend class="statut"><:cisf:eq_alignement:></legend> 
				<div class="radio"><input id="left" type="radio" name="align_image" [(#GET{ci_align_image}|=={left}|oui)checked="checked"] value="left" /><label for="left" ><:cisf:eq_gauche:></label></div> 
				<div class="radio"><input id="center" type="radio" name="align_image" [(#GET{ci_align_image}|=={center}|oui)checked="checked"] value="center" /><label for="center" ><:cisf:eq_centre:></label></div> 
				<div class="radio"><input id="right" type="radio" name="align_image" [(#GET{ci_align_image}|=={right}|oui)checked="checked"] value="right" /><label for="right" ><:cisf:eq_droite:></label></div> 
				</fieldset> 
			]


		]		

		[(#REM) Vignette personnalisee ]
                [(#GET{ci_logo}|non)
		[(#GET{ci_type_inclus}|match{^(image|embed)$}|oui)
                        [(#ID_VIGNETTE|>{0}|oui)
                        <div class="texte">&nbsp;</div>
                        <div class="texte"><span class="gras"><:cisf:eq_vign:></span></div>
                        <div class="texte">[(#LOGO_DOCUMENT|image_reduire{150,150})]</div>
                        <p class="boutons_cisf"><a href="[(#SELF|parametre_url{cilienget,bt_vignette_supprimer})]" onclick="cilien('bt_vignette_supprimer'); return false;" class="btn_cisf bouton_supprimg"><:cisf:eq_vign_suppr:></a></p>
                        ]
                        [(#ID_VIGNETTE|<={0}|oui)
                        <p class="boutons_cisf"><a href="[(#SELF|parametre_url{cilienget,bt_vignette})]" onclick="cilien('bt_vignette'); return false;" class="btn_cisf bouton_img"><:cisf:eq_vign_ajout:></a></p>
                        ]
		]
		]

		
		[(#REM) Portfolio ]
#SET{ciportfolio,''}
[(#VAL|cisf_doc_modifier_portfolio|oui)
#SET{ciportfolio,'oui'}
]
                
[(#GET{ciportfolio}|=={oui}|oui)	
		[(#EXTENSION|match{'^(gif|jpg|png)$'}|oui)
			[(#GET{ci_mode}|=={document}|oui)
				<div class="cadreboutonportfolio"><a href="[(#SELF|parametre_url{cilienget,bt_portfolio_img})]" onclick="cilien('bt_portfolio_img'); return false;" class="bouton_portfolio_img"><:cisf:upload_info_mode_image:></a></div>
			]
			[(#GET{ci_mode}|=={image}|oui)
				<div class="cadreboutonportfolio"><a href="[(#SELF|parametre_url{cilienget,bt_portfolio_doc})]" onclick="cilien('bt_portfolio_doc'); return false;" class="bouton_portfolio_doc"><:cisf:upload_info_mode_document:></a></div>
			]
		]
]		
		
		<!--extra-->
		[(#REM) declarer les hidden qui declencheront le service du formulaire 
		parametre : url d'action ]
		#ACTION_FORMULAIRE{#ENV{action}}
			<input type="hidden" name="ciaction" value="editer_document" >
			<input type="hidden" name='formulaire' value='doc_modifier'>
			<input type="hidden" name="id_document" value=#ID_DOCUMENT >
			
			<input type="hidden" id="cilieninput" name="cilieninput" value="">
			
			<div class="cadrevalider">
			<input type="submit" name="enregistrer" value="<:bouton_enregistrer:>" class="bouton_valider"></a>
			<a href="[(#SELF|parametre_url{cilienget,annuler})]" onclick="cilien('annuler'); return false;" class="bouton_valider"><:cisf:eq_retour:></a>
			</div>
		</BOUCLE_documents>
		</B_documents>
			<div class="titreaction"><:cisf:eq_echec_upload:></div>
		<//B_documents>

	</form>

[(#SPIP_VERSION|>={4}|oui)	
<INCLURE{fond=formulaires/dateur/inc-dateur,heure_pas} />
]