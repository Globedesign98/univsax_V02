#CACHE{0}
[(#SET{cibigup,[(#VAL|cisf_utiliser_bigup)]})]
#SET{citab,'[]'}
#SET{cilister_contenu_archive,''}

[(#GET{cibigup}|non)
    [(#ENV*{erreurs}|table_valeur{lister_contenu_archive}|oui)
    #SET{cilister_contenu_archive,'oui'}
    ]
]

<div class='formulaire_spip [(#GET{cibigup}|oui)formulaire_spip_cisf_bigup] formulaire_joindre formulaire_joindre_document' id='formulaire_joindre_document-#ENV{id,new}'>
	
	<span class="image_loading"></span>
	[<div class="reponse_formulaire reponse_formulaire_ok">(#ENV*{message_ok})</div>]
	[<p class="reponse_formulaire reponse_formulaire_erreur">(#ENV*{message_erreur})</p>]
	
	<form action="#ENV{action}#formulaire_joindre_document-#ENV{id,new}" method="post" enctype='multipart/form-data'><div>
		[(#ACTION_FORMULAIRE{#ENV{action}})]
		
		#SET{domid,_#ENV{mode}|concat{'_',#ENV{id,new}}}

		<div id="defaultsubmit#GET{domid}" class="none"></div>

[(#GET{cilister_contenu_archive}|non)

		[(#REM) Formulaire d'upload de fichier]
                <div[(#GET{cibigup}|oui) class="editer-groupe"][(#GET{cibigup}|non) class='joindre_mode#GET{domid}' id='joindre_upload#GET{domid}']>
                                <:medias:bouton_download_depuis:> <:medias:bouton_download_local:>
                    <div class='editer editer_fichier_upload[ (#ENV*{erreurs}|table_valeur{fichier_upload}|oui)erreur]'>
                        <label for='fichier_upload#ENV{domid}'[(#GET{cibigup}|oui) style="display: none;"]><:medias:info_telecharger:></label>[
                        <span class='erreur_message'>(#ENV*{erreurs}|table_valeur{fichier_upload})</span>
                        ]<input class='file[(#ENV{multi}|=={non}|non) multi]' type="file" name="fichier_upload#GET{citab}" value='[(#ENV{fichier_upload}|is_array|?{'', #ENV{fichier_upload}})]' id="fichier_upload#ENV{domid}" size='11' />
                        <!--editer_fichier_upload-->
                    </div>
                    <p class='boutons'><input class='submit' type="submit" name="joindre_upload" value="<:medias:bouton_upload:>"/></p>
                </div>

		[(#REM) Formulaire pour document dans mediatheque]
                <div[(#GET{cibigup}|oui) class="editer-groupe"][(#GET{cibigup}|non) class='joindre_mode#GET{domid}' id='joindre_mediatheque#GET{domid}']>
		<:medias:bouton_download_depuis:> <:cisf:bouton_download_par_mediatheque:>	
			<div>
				<div class='editer_refdoc_joindre[ (#ENV*{erreurs}|table_valeur{refdoc_joindre}|oui)erreur]'>
					<label for='refdoc_joindre#GET{domid}'><:medias:label_refdoc_joindre:></label>[
					<span class='erreur_message'>(#ENV*{erreurs}|table_valeur{refdoc_joindre})</span>
					]<input class='text' type="text" name="refdoc_joindre" value='#ENV{refdoc_joindre}' id="refdoc_joindre#GET{domid}"/>
					<a href="[(#SELF|parametre_url{page,cisf_choix_document})]" class="lienbtn"><:medias:bouton_parcourir:></a>
				</div>
			</div>
			<p class='boutons'><input class='submit' type="submit" name="joindre_mediatheque" value="<:medias:bouton_attacher_document:>"/></p>
		</div>
		
		[(#REM) Formulaire pour upload ftp]
		[<div[(#GET{cibigup}|oui) class="editer-groupe"][(#GET{cibigup}|non) class='joindre_mode#GET{domid}' id='joindre_ftp#GET{domid}']>
			
			<:medias:bouton_download_depuis:> <:medias:bouton_download_par_ftp:>	
			<div>
				<div class='editer_cheminftp[ (#ENV*{erreurs}|table_valeur{cheminftp}|oui)erreur]'>
					<label for='cheminftp#GET{domid}'>[(#VAL{info_selectionner_fichier}|_T{#ARRAY{upload,#ENV*{_dir_upload_ftp}}})]</label>[
					<span class='erreur_message'>(#ENV*{erreurs}|table_valeur{cheminftp})</span>
					]<select name='cheminftp' id='cheminftp#GET{domid}' size='1'>
					<option value=''>&gt;&gt;</option>
					(#ENV*{_options_upload_ftp})
					</select>
				</div>
			</div>][(#ENV{_dir_upload_ftp}|et{#ENV{_options_upload_ftp}|non}|oui)
			<p class="infos">
			[(#VAL{info_installer_ftp}|_T{#ARRAY{upload,#ENV*{_dir_upload_ftp}}})] #AIDER{ins_upload}
			</p>
			]
			[<p class='boutons'>
				(#ENV*{_options_upload_ftp}|oui)
				<input class='submit' type="submit" name="joindre_ftp" value="<:bouton_choisir:>"/>
				
			</p>
		</div>]
		
		[(#REM) Formulaire pour document distant]
                <div[(#GET{cibigup}|oui) class="editer-groupe"][(#GET{cibigup}|non) class='joindre_mode#GET{domid}' id='joindre_distant#GET{domid}']>
		<:medias:bouton_download_depuis:> <:cisf:bouton_download_sur_le_web:>
			<div>
				<div class='editer_url[ (#ENV*{erreurs}|table_valeur{url}|oui)erreur]'>
					<label for='url#GET{domid}'><:cisf:info_referencer_doc_distant:></label>[
					<span class='erreur_message'>(#ENV*{erreurs}|table_valeur{url})</span>
					]<input class='text' type="text" placeholder="https://" name="url" value='#ENV{url}' id="url#GET{domid}"/>
				</div>
			</div>
			<p class='boutons'><input class='submit' type="submit" name="joindre_distant" value="<:bouton_choisir:>"/></p>
		</div>
]
		
		[(#REM) Formulaire pour deballer un zip]
[(#GET{cilister_contenu_archive}|oui)
		[<ul><li class='fieldset deballer_zip'>(#ENV*{erreurs}|table_valeur{lister_contenu_archive})</li></ul>]
]
		
	</div></form>

</div>
